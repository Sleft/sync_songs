#!/usr/bin/env ruby
# -*- coding: utf-8; mode: ruby -*-

require 'thor'
require_relative '../lib/sync-songs.rb'

# Public: Classes for syncing sets of songs.
module SyncSongs
  class Cli < Thor
    class_option :verbose, type: :boolean, aliases: '-v'
    services_option = [:services, {type: :hash, required: true,
                         default: {'grooveshark' => 'favorites',
                           'lastfm' => 'favorites'},
                         banner: 'service:type',
                         desc: 'A list of at least two services paired with types, e.g. grooveshark:favorites lastfm:favorites',
                         aliases: '-s'}]

    desc 'sync', 'Sync sets of songs'
    long_desc <<-LONGDESC
    WRITE!!!
   LONGDESC
    
    method_option *services_option
    def sync
      controller = Controller.new(__method__.to_sym, options[:services], CLI.new(options[:verbose]))
    end

    method_option *services_option
    desc 'diff', 'Diff sets of songs'
    long_desc <<-LONGDESC
    WRITE!!!
   LONGDESC
    def diff
      controller = Controller.new(__method__.to_sym, options[:services], CLI.new(options[:verbose]))
    end
  end

  # p '1<<' =~ /[<>=]{1}/
  
  Cli.start(ARGV)
end
